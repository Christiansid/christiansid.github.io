/*! For license information please see main.878cc51dc2a92d8c2038.bundle.js.LICENSE.txt */
(()=>{var e,t={223:(e,t,i)=>{"use strict";i(260);class s extends Phaser.GameObjects.Text{constructor(e){super(e,10,10,"",{color:"black",fontSize:"42px"}),e.add.existing(this),this.setOrigin(0),this.score=0}update(){this.setText(`Score: ${this.score}`)}increaseScore(){this.score+=1,this.update()}getScore(){return this.score}}class n extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.key),e.scene.physics.world.enableBody(this),e.scene.add.existing(this),this.body.setCollideWorldBounds(!0,0,0,!0)}create(e){}delete(){}}class a extends n{constructor(e,t,i){return super(e),this.setScale(e.scale),this.scene=e.scene,this.block_group=e.scene.add.group(),this.block_speed=t,this.scale=e.scale,this.create(i),this}create(e){let t=this.scale,i=522*t,s=e;this.body.setVelocityX(-this.block_speed),this.body.setAllowGravity(!1),this.x=this.scene.cameras.main.width-i/2;for(var n=2;n<=s;n++){let e=d[Math.floor(Math.random()*d.length)];var a=this.scene.physics.add.image(window.innerWidth-i/2,this.scene.ground.y-this.scene.ground.height/2-522*t*n+522*t/2,e).setScale(t);a.body.setAllowGravity(!1),this.block_group.add(a),a.body.setVelocityX(-this.block_speed)}this.block_group}destroy(){this.block_group.clear(),super.destroy()}updateSpeed(e){this.block_speed=e}collide(){}}class r extends Phaser.GameObjects.Sprite{constructor(e){super(e.scene,e.x,e.y,e.key),this.setScale(e.scale),e.scene.physics.world.enable(this),e.scene.add.existing(this),this.inAir=!1,this.jump_lock=!1,this.scene=e.scene,this.key=e.key,this.double_jump=!1,this.finger_down=!1,this.body.setSize(17,47,!0)}jump(e){let t=this;e.isDown&&(0==this.inAir&&0==this.jump_lock?(this.finger_down=!0,this.body.setVelocityY(-690),this.inAir=!0,this.play("jump",!0),this.double_jump=!0,t.scene.time.delayedCall(400,(function(){t.jump_lock=!0,t.double_jump=!0}))):0==this.jump_lock?this.body.setVelocityY(-690):1==this.double_jump&&0==this.finger_down&&(this.body.setVelocityY(-650),this.double_jump=!1)),e.isDown||1!=this.inAir||(this.jump_lock=!0,this.finger_down=!1)}onGround(){this.play("walk",!0),this.inAir=!1,this.jump_lock=!1,this.double_jump=!1}}class o{constructor(e){this.scene=e}playAgain(e,t,i){void 0===i&&(i=1);var s=this.scene.add.sprite(e,t,"play_again_default").setScale(i).setInteractive().on("pointerup",(()=>{s.setTexture("play_again_default"),this.scene.scene.restart()})).on("pointerdown",(()=>s.setTexture("play_again_clicked")))}play(e,t,i){void 0===i&&(i=1);var s=this.scene.add.sprite(e,t,"play_default").setScale(i).setInteractive().on("pointerup",(()=>{s.setTexture("play_default");let e=function(e){let t="first_time=",i=decodeURIComponent(document.cookie).split(";");for(let e=0;e<i.length;e++){let s=i[e];for(;" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}();""==e||"true"==e?this.firstPlay():this.scene.scene.start("MainScene")})).on("pointerdown",(()=>s.setTexture("play_clicked")))}firstPlay(){let e=this.scene.add.text(0,0,"",{backgroundColor:"black",fixedWidth:window.innerWidth,fixedHeight:window.innerHeight}),t=this.scene.add.text(25,window.innerHeight/3,"Welcome to baggage run!\nThe goal of the game is to avoid bags by jumping over them        \n\n\nPress or hold to jump.\nThe longer you hold the higher you jump.        \n\nTo double jump press the screen again after letting go.",{color:"white",align:"center",fontSize:"54px",fontFamily:"roboto",wordWrap:{width:window.innerWidth,useAdvancedWrap:!0}});e.on("pointerup",(()=>{t.destroy(),e.destroy(),function(e,t,i=0){if(0==i)document.cookie=e+"="+t+";path=/";else{const s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3);let n="expires="+s.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"}}("first_time","false"),this.scene.scene.start("MainScene")}),this),e.alpha=.7,e.setInteractive()}leaderboard(e,t,i){void 0===i&&(i=1);var s=this.scene.add.sprite(e,t,"leaderboard_default").setScale(i).setInteractive().on("pointerup",(()=>{s.setTexture("leaderboard_default")})).on("pointerdown",(()=>s.setTexture("leaderboard_clicked")))}quit(e,t,i){void 0===i&&(i=1);var s=this.scene.add.sprite(e,t,"quit_default").setScale(i).setInteractive().on("pointerup",(()=>{s.setTexture("quit_default"),this.scene.scene.start("StartScene")})).on("pointerdown",(()=>s.setTexture("quit_clicked")))}}const d=new Array("block_1","block_2","block_3","block_4");class h extends Phaser.Scene{constructor(){super({key:"MainScene"})}create(){this.start_sequence=!0,this.game_over=!1,this.spawn_time=3e3,this.block_speed=275,this.facing_correct=!1,this.obstacle_array=new Array,this.buttons=new o(this),this.add.tileSprite(window.innerWidth/2,0,window.innerWidth,window.innerHeight,"background_tile"),this.score_text=new s(this),this.score_text.update();var e=this.add.container(window.innerWidth/2,window.innerHeight/2).setSize(window.innerWidth,window.innerHeight),t=this.add.tileSprite(0,0,window.innerWidth,window.innerHeight/2,"brick_tile");t.y=t.height/2,e.add(t),this.ground=this.physics.add.image(.5*window.innerWidth,.5*window.innerHeight+16,"platform"),this.ground.body.setAllowGravity(!1),this.ground.setImmovable(!0);const i={scene:this,x:.15*window.innerWidth,y:this.ground.y-4*this.ground.height,key:"player",scale:4};this.OBSTACLE_CONFIG={key:"block_1",x:window.innerWidth,y:this.ground.y-this.ground.height/2-52.2,scene:this,scale:.2},this.physics.world.on("worldbounds",this.onWorldBounds,this),this.spawn_timer=this.time.addEvent(this.timer_config),this.player_character=new r(i),this.player_character.play("jump"),this.physics.add.collider(this.player_character,this.ground,this.onGround,void 0,this),this.last_spawn=this.time.now}update(){if(this.time.now-this.last_spawn>this.spawn_time&&0==this.game_over){let t=this.start_sequence?2:Phaser.Math.Between(2,3);this.last_spawn=this.time.now,this.OBSTACLE_CONFIG.key=d[Math.floor(Math.random()*d.length)];var e=new a(this.OBSTACLE_CONFIG,this.block_speed,t);this.physics.add.collider(this.player_character,e.block_group,this.gameOver,void 0,this),this.obstacle_array.push(e)}this.player_character.jump(this.input.activePointer)}onWorldBounds(){this.score_text.increaseScore();let e=this.score_text.getScore();e%10==0&&(this.block_speed+=100,this.spawn_time-=300),e>2&&(this.start_sequence=!1);let t=this.obstacle_array.shift();t.body.setCollideWorldBounds(!1).setVelocityX(-t.block_speed),this.time.delayedCall(300,(function(){t.destroy()}),[],this)}onGround(){this.player_character.onGround()}gameOver(){this.game_over=!0,this.player_character.setTint("0xFF0000"),this.physics.pause(),this.spawn_timer.remove(),this.player_character.play("jump",!0),this.buttons.playAgain(window.innerWidth/2,6*window.innerHeight/9,.7),this.buttons.leaderboard(window.innerWidth/2,7*window.innerHeight/9,.7),this.buttons.quit(window.innerWidth/2,8*window.innerHeight/9,.7)}}class c extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image("platform","assets/img/platform.png"),this.load.image("block_1","assets/img/block_1.png"),this.load.image("block_2","assets/img/block_2.png"),this.load.image("block_3","assets/img/block_3.png"),this.load.image("block_4","assets/img/block_4.png"),this.load.spritesheet("player","assets/img/dude.png",{frameWidth:32,frameHeight:48}),this.load.image("brick_tile","assets/img/BrickTiles.png"),this.load.image("background_tile","assets/img/background_tile.png"),this.load.image("play_again_default","assets/img/button_default.png"),this.load.image("play_again_clicked","assets/img/button_clicked.png"),this.load.image("play_default","assets/img/play_default.png"),this.load.image("play_clicked","assets/img/play_clicked.png"),this.load.image("leaderboard_default","assets/img/leaderboard_default.png"),this.load.image("leaderboard_clicked","assets/img/leaderboard_clicked.png"),this.load.image("quit_default","assets/img/quit_default.png"),this.load.image("quit_clicked","assets/img/quit_clicked.png")}create(){this.anims.create({key:"walk",frameRate:5,frames:this.anims.generateFrameNumbers("player",{start:5,end:8}),repeat:-1}),this.anims.create({key:"jump",frameRate:1,frames:[{key:"player",frame:6}]}),this.scene.start("StartScene")}}class l extends Phaser.Scene{constructor(){super({key:"GameoverScene"})}create(){var e=this.add.sprite(this.cameras.main.width/2,this.cameras.main.height/3,"play_again_default").setInteractive().on("pointerup",(()=>{console.log("button works"),e.setTexture("play_again_default")})).on("pointerdown",(()=>e.setTexture("play_again_clicked")))}}class p extends Phaser.Scene{constructor(){super({key:"StartScene"})}create(){this.add.tileSprite(window.innerWidth/2,0,window.innerWidth,window.innerHeight,"background_tile");var e=this.add.container(window.innerWidth/2,window.innerHeight/2).setSize(window.innerWidth,window.innerHeight),t=this.add.tileSprite(0,0,window.innerWidth,window.innerHeight/2,"brick_tile");t.y=t.height/2,e.add(t);var i=this.add.image(.5*window.innerWidth,.5*window.innerHeight+16,"platform"),s=(this.add.image(.15*window.innerWidth,i.y-4*i.height,"player").setScale(4).setFlipX(!0),new o(this));s.play(window.innerWidth/2,6*window.innerHeight/9,.7),s.leaderboard(window.innerWidth/2,7*window.innerHeight/9,.7),s.quit(window.innerWidth/2,8*window.innerHeight/9,.7)}}const u={type:Phaser.AUTO,backgroundColor:"#ffffff",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:window.innerWidth,height:window.innerHeight,resolution:window.devicePixelRatio},scene:[c,h,l,p],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:1800}}}};window.addEventListener("load",(()=>{new Phaser.Game(u)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var a=i[e]={exports:{}};return t[e].call(a.exports,a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,i,n,a)=>{if(!i){var r=1/0;for(c=0;c<e.length;c++){for(var[i,n,a]=e[c],o=!0,d=0;d<i.length;d++)(!1&a||r>=a)&&Object.keys(s.O).every((e=>s.O[e](i[d])))?i.splice(d--,1):(o=!1,a<r&&(r=a));if(o){e.splice(c--,1);var h=n();void 0!==h&&(t=h)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,n,a]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var n,a,[r,o,d]=i,h=0;if(r.some((t=>0!==e[t]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(d)var c=d(s)}for(t&&t(i);h<r.length;h++)a=r[h],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},i=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),s.O(void 0,[216],(()=>s(223)));var n=s.O(void 0,[216],(()=>s(204)));n=s.O(n)})();